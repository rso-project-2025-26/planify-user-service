replicaCount: 1

image:
  repository: ghcr.io/rso-project-2025-26/planify-user-service
  tag: main
  pullPolicy: Always

imagePullSecrets:
  - name: ghcr-secret

service:
  type: ClusterIP
  port: 8082
  targetPort: 8082

resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 250m
    memory: 512Mi

probes:
  liveness:
    path: /actuator/health/liveness
    initialDelaySeconds: 60
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  readiness:
    path: /actuator/health/readiness
    initialDelaySeconds: 30
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3

config:
  springProfilesActive: "prod"
  serverPort: "8082"
  
  database:
    url: "jdbc:postgresql://postgres-service:5432/planify"
    username: "planify"
    schema: "auth"
    poolSize: "10"
    poolMinIdle: "5"
    connTimeout: "30000"
  
  jpa:
    ddlAuto: "validate"
    showSql: "false"
  
  keycloak:
    url: "http://keycloak-service:8080/keycloak"
    realm: "planify"
    issuerUri: "https://4.185.235.181.nip.io/keycloak/realms/planify"
    jwkSetUri: "http://keycloak-service:8080/keycloak/realms/planify/protocol/openid-connect/certs"
  
  kafka:
    bootstrapServers: "kafka-service:9092"
    consumerGroup: "user-service"
    autoOffsetReset: "earliest"
    topicJoinRequestSent: "user.join-request-sent"
    topicJoinRequestResponded: "user.join-request-responded"
    topicInvitationSent: "user.invitation-sent"
    topicInvitationResponded: "user.invitation-responded"
  
  flyway:
    enabled: "true"

  swagger:
    enabled: "false"
  
  management:
    endpointsInclude: "health,info,metrics,prometheus"
  
  logging:
    levelRoot: "WARN"
    levelApp: "INFO"
    levelSpringWeb: "WARN"
    levelSpringSecurity: "WARN"
    levelHibernateSql: "WARN"

secrets:
  postgresSecretName: postgres-secret
  postgresPasswordKey: POSTGRES_PASSWORD
  
  database:
    username: "planify"
    password: "planify123"
  keycloak:
    adminUsername: "admin"
    adminPassword: "admin"